<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Portal</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="login-container">
        <div class="login-box">
            <h1>Welcome Back</h1>
            <p class="subtitle">Please enter your details to continue</p>

            <!-- Toggle Switch -->
            <div class="auth-toggle">
                <button type="button" class="toggle-btn active" id="showLoginBtn">Login</button>
                <button type="button" class="toggle-btn" id="showRegisterBtn">Register</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="form-section active">
                <div class="input-group">
                    <label for="loginUsername">Username</label>
                    <input type="text" id="loginUsername" placeholder="Enter your username">
                </div>
                <div class="input-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password">
                </div>
                <button class="primary-btn" onclick="loginUser()">Sign In</button>
                <div id="loginStatus" class="status-msg"></div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="form-section">
                <!-- Role Selection -->
                <div class="role-group-label">Select Role</div>
                <div class="role-selector">
                    <!-- Hidden Input for Logic Compatibility -->
                    <input type="hidden" id="registerRole" value="employee">

                    <!-- Employee Card -->
                    <div class="role-card active" onclick="selectRole('employee', this)">
                        <svg class="role-icon" viewBox="0 0 24 24">
                            <path
                                d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <span>Employee</span>
                    </div>

                    <!-- Manager Card -->
                    <div class="role-card" onclick="selectRole('manager', this)">
                        <svg class="role-icon" viewBox="0 0 24 24">
                            <path
                                d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z" />
                        </svg>
                        <span>Manager</span>
                    </div>

                    <!-- Admin Card -->
                    <div class="role-card" onclick="selectRole('admin', this)">
                        <svg class="role-icon" viewBox="0 0 24 24">
                            <path
                                d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6 0 1.2.6 1.2 1.2v3.5c0 .7-.6 1.3-1.2 1.3H9.2c-.6 0-1.2-.6-1.2-1.2v-3.5c0-.6.6-1.2 1.2-1.2V9.5C9.2 8.1 10.6 7 12 7zm0 1c-.8 0-1.5.7-1.5 1.5V11h3V9.5c0-.8-.7-1.5-1.5-1.5z" />
                        </svg>
                        <span>Admin</span>
                    </div>
                </div>

                <div class="input-group">
                    <label for="registerUsername">Username</label>
                    <input type="text" id="registerUsername" placeholder="Choose a username">
                </div>
                <div class="input-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" placeholder="Create a password">
                </div>
                <button class="primary-btn" onclick="registerUser()">Create Account</button>
                <div id="registerStatus" class="status-msg"></div>
            </div>

        </div>
    </div>

    <script src="js/navigation.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Check for existing token
        document.addEventListener('DOMContentLoaded', checkAuthAndRedirect);

        // UI Logic for Toggle
        const loginBtn = document.getElementById('showLoginBtn');
        const registerBtn = document.getElementById('showRegisterBtn');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const title = document.querySelector('.login-box h1');

        loginBtn.addEventListener('click', () => {
            loginBtn.classList.add('active');
            registerBtn.classList.remove('active');
            loginForm.classList.add('active');
            registerForm.classList.remove('active');
            title.textContent = 'Welcome Back';
        });

        registerBtn.addEventListener('click', () => {
            registerBtn.classList.add('active');
            loginBtn.classList.remove('active');
            registerForm.classList.add('active');
            loginForm.classList.remove('active');
            title.textContent = 'Create Account';
        });

        // UI Logic for Role Selection
        function selectRole(roleValue, cardElement) {
            // Update Hidden Input (keeps existing logic working)
            const input = document.getElementById('registerRole');
            if (input) input.value = roleValue;

            // Visual Update
            document.querySelectorAll('.role-card').forEach(card => card.classList.remove('active'));
            cardElement.classList.add('active');
        }
    </script>
</body>

</html>